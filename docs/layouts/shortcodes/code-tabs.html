{{/*
  Code Tabs Shortcode
  Usage:
  {{< code-tabs >}}
  {{< tab name="YAML" >}}
  ```yaml
  # Your YAML code here
  ```
  {{< /tab >}}
  {{< tab name="JSON" >}}
  ```json
  { "your": "json" }
  ```
  {{< /tab >}}
  {{< /code-tabs >}}
*/}}

{{ $id := .Page.File.UniqueID | printf "codetabs-%s-%d" (now.UnixNano) }}

<div class="code-tabs" id="{{ $id }}">
  <ul class="nav nav-tabs" role="tablist">
    {{ range $index, $tab := .Scratch.Get "tabs" }}
    <li class="nav-item" role="presentation">
      <button class="nav-link {{ if eq $index 0 }}active{{ end }}"
              id="{{ $id }}-tab-{{ $index }}"
              data-bs-toggle="tab"
              data-bs-target="#{{ $id }}-panel-{{ $index }}"
              type="button"
              role="tab"
              aria-controls="{{ $id }}-panel-{{ $index }}"
              aria-selected="{{ if eq $index 0 }}true{{ else }}false{{ end }}">
        {{ .name }}
      </button>
    </li>
    {{ end }}
  </ul>
  <div class="tab-content">
    {{ range $index, $tab := .Scratch.Get "tabs" }}
    <div class="tab-pane fade {{ if eq $index 0 }}show active{{ end }}"
         id="{{ $id }}-panel-{{ $index }}"
         role="tabpanel"
         aria-labelledby="{{ $id }}-tab-{{ $index }}">
      {{ .content | markdownify }}
    </div>
    {{ end }}
  </div>
</div>

{{ .Scratch.Delete "tabs" }}
