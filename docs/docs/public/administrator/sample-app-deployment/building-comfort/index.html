<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.111.3">
<link rel="alternate" type="application/rss&#43;xml" href="https://project-drasi.github.io/administrator/sample-app-deployment/building-comfort/index.xml">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Building Comfort | Project Drasi</title>
<meta name="description" content="Installing the Building Comfort sample application on self-hosted Drasi
">
<meta property="og:title" content="Building Comfort" />
<meta property="og:description" content="Installing the Building Comfort sample application on self-hosted Drasi
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://project-drasi.github.io/administrator/sample-app-deployment/building-comfort/" />
<meta itemprop="name" content="Building Comfort">
<meta itemprop="description" content="Installing the Building Comfort sample application on self-hosted Drasi
"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Building Comfort"/>
<meta name="twitter:description" content="Installing the Building Comfort sample application on self-hosted Drasi
"/>




<link rel="preload" href="/scss/main.min.8b5cb6bf325858503123a884cabb18b474576e49a8f8b45c16440e12cb52ad15.css" as="style">
<link href="/scss/main.min.8b5cb6bf325858503123a884cabb18b474576e49a8f8b45c16440e12cb52ad15.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.6.3.min.js"
  integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ=="
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/prism.css"/>

  </head>
  <body class="td-section">
    <header>
      <nav class="td-navbar navbar-dark js-navbar-scroll">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="navbar-brand__name">Project Drasi</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/support"><span>SUPPORT</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://dev.azure.com/azure-octo/Incubations/_git/ReactiveGraph?path=%2F&amp;version=GBdevelop&amp;_a=contents" target="_blank" rel="noopener"><span>CODE</span></a>
      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse" id="td-section-nav">
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m--li">
  <a href="/" title="Project Drasi" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-"><span class="">Home</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-solution-developer-li">
  <a href="/solution-developer/" title="Solution Developer Guides" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developer"><span class="">Solution Developer</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-solution-developergetting-started-li">
  <a href="/solution-developer/getting-started/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developergetting-started"><span class="">QuickStart Tutorial</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-solution-developerbackground-li">
  <a href="/solution-developer/background/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developerbackground"><span class="">Background</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-solution-developercomponents-li">
  <a href="/solution-developer/components/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developercomponents"><span class="">Components</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-solution-developercomponentssources-li">
  <a href="/solution-developer/components/sources/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developercomponentssources"><span class="">Sources</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-solution-developercomponentscontinuous-queries-li">
  <a href="/solution-developer/components/continuous-queries/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developercomponentscontinuous-queries"><span class="">Continuous Queries</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-solution-developercomponentsreactions-li">
  <a href="/solution-developer/components/reactions/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developercomponentsreactions"><span class="">Reactions</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-solution-developersolution-design-li">
  <a href="/solution-developer/solution-design/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developersolution-design"><span class="">Solution Design</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-solution-developerquery-language-li">
  <a href="/solution-developer/query-language/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developerquery-language"><span class="">Continuous Query Syntax</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-solution-developervscode-extension-li">
  <a href="/solution-developer/vscode-extension/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developervscode-extension"><span class="">VS Code Extension</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-solution-developertroubleshooting-li">
  <a href="/solution-developer/troubleshooting/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developertroubleshooting"><span class="">Troubleshooting</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-solution-developersample-apps-li">
  <a href="/solution-developer/sample-apps/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developersample-apps"><span class="">Sample Applications</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-administrator-li">
  <a href="/administrator/" title="Administrator Guides" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-administrator"><span class="">Administrator</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-administratorplatform-deployment-li">
  <a href="/administrator/platform-deployment/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-administratorplatform-deployment"><span class="">Deploying Drasi</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-administratorplatform-deploymentfrom-preview-images-li">
  <a href="/administrator/platform-deployment/from-preview-images/" title="Deploying Drasi from Preview Images" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-administratorplatform-deploymentfrom-preview-images"><span class="">From Images</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-administratorplatform-deploymentfrom-source-li">
  <a href="/administrator/platform-deployment/from-source/" title="Deploying Drasi from Source" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-administratorplatform-deploymentfrom-source"><span class="">From Source</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-administratorsample-app-deployment-li">
  <a href="/administrator/sample-app-deployment/" title="Installing Sample Applications" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-administratorsample-app-deployment"><span class="">Installing Samples</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-administratorsample-app-deploymentcurbside-pickup-li">
  <a href="/administrator/sample-app-deployment/curbside-pickup/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-administratorsample-app-deploymentcurbside-pickup"><span class="">Curbside Pickup</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-administratorsample-app-deploymentbuilding-comfort-li">
  <a href="/administrator/sample-app-deployment/building-comfort/" class="align-left ps-0 active td-sidebar-link td-sidebar-link__section" id="m-administratorsample-app-deploymentbuilding-comfort"><span class="td-sidebar-nav-active-item">Building Comfort</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-administratorobservability-li">
  <a href="/administrator/observability/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-administratorobservability"><span class="">Observability</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-support-li">
  <a href="/support/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-support"><span class="">Support</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-reference-li">
  <a href="/reference/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-reference"><span class="">Reference</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referenceglossary-li">
  <a href="/reference/glossary/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-referenceglossary"><span class="">Glossary</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referencedemo-environment-li">
  <a href="/reference/demo-environment/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-referencedemo-environment"><span class="">Demo Environment</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referencequery-container-li">
  <a href="/reference/query-container/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-referencequery-container"><span class="">Query Container</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referenceusing-kind-li">
  <a href="/reference/using-kind/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-referenceusing-kind"><span class="">Using Kind</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referenceusing-minikube-li">
  <a href="/reference/using-minikube/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-referenceusing-minikube"><span class="">Using MiniKube</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referencedrasi-cli-li">
  <a href="/reference/drasi-cli/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-referencedrasi-cli"><span class="">Drasi CLI</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referencesmoke-test-li">
  <a href="/reference/smoke-test/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-referencesmoke-test"><span class="">Smoke test</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referencesetup-postgres-li">
  <a href="/reference/setup-postgres/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-referencesetup-postgres"><span class="">Using PostgreSQL</span></a>
</li>
  </ul>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            
<div class="td-page-meta ms-2 pb-1 pt-2 mb-0">

</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#prerequisites">Prerequisites</a></li>
    <li><a href="#overview-of-the-app">Overview of the app</a>
      <ul>
        <li><a href="#app-architecture">App Architecture</a></li>
      </ul>
    </li>
    <li><a href="#deploying-the-app">Deploying the App</a>
      <ul>
        <li><a href="#1-set-up-the-sample-data-provider">1. Set up the sample data provider</a></li>
        <li><a href="#2-deploy-the-drasi-components">2. Deploy the Drasi components</a></li>
        <li><a href="#3-run-the-demo-backend-and-frontend">3. Run the demo backend and frontend</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </div>
    
            

          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="https://project-drasi.github.io/administrator/">Administrator</a></li>
  <li class="breadcrumb-item">
    <a href="https://project-drasi.github.io/administrator/sample-app-deployment/">Installing Samples</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    Building Comfort</li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>Building Comfort</h1>
  <div class="lead">Installing the Building Comfort sample application on self-hosted Drasi</div>
	<header class="article-meta">
		
</header>
	<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>Drasi CLI</li>
<li>A dev environment with <a href="https://nodejs.org/">Node.js 18</a>.</li>
<li><a href="https://www.python.org/downloads/">Python 3.8</a> or higher.</li>
<li>An Azure Subscription with permissions to create resources.</li>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli">Azure CLI 2.40</a> or higher.</li>
<li><a href="https://learn.microsoft.com/en-us/azure/azure-functions/functions-run-local?tabs=v4%2Cmacos%2Ccsharp%2Cportal%2Cbash#install-the-azure-functions-core-tools">Azure Functions Core Tools 4.0</a> or higher.</li>
<li>A Kubernetes cluster with <a href="https://project-drasi.github.io/administrator/platform-deployment/">Project Drasi deployed</a>.</li>
<li>A clone of the <a href="https://dev.azure.com/azure-octo/Incubations/_git/ReactiveGraph?path=%2F&amp;version=GBdevelop&amp;_a=contents">Project Drasi Git repository</a> on your local machine.</li>
</ul>
<h2 id="overview-of-the-app">Overview of the app</h2>
<p>This application illustrates the use of Project Drasi for a hypothetical building management scenario, including:</p>
<ul>
<li>The use of Continuous Queries over a Cosmos Gremlin database.</li>
<li>Continuous Queries that include aggregations across hierarchical graph data.</li>
<li>The use of the Gremlin Reaction to update a Gremlin database based on the output of a Continuous Query.</li>
<li>The use of the SignalR Reaction to integrate Continuous Query output with a React JS Application.</li>
</ul>
<p>In this sample, Continuous Queries are used to calculate a <em>comfort level</em> metric for building management. This is a human-centric measurement that combines the physical measurements in a room such as temperature, humidity, and CO2 levels into a perceptual rating of its comfort. For the purposes of this sample, the comfort level will be calculated dynamically for a room from the physical measurements using the simplified formula:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>comfortLevel = trunc(50+(temp-72) + (humidity-42) + if( CO2 &gt; 500,(CO2 - 500)/25,0)) 
</span></span></code></pre></div><p>A range of 40 to 50 is considered acceptable: a value below 40 indicates that temperature and/or humidity is too low, while a value above 50 indicates that temperature, humidity, and/or CO2 levels are too high.</p>
<p>The app will provide a dashboard frontend to visualize the comfort levels of rooms and floors, as well as a way to change the environment measurements in the database to simulate changes in the building environment. The dashboard will also show alerts for rooms, floors, and the building when the comfort level is out of range, where the aggregated comfort levels for the floors and building are calculated from the average comfort levels of the rooms and floors respectively by Reactions.</p>
<h3 id="app-architecture">App Architecture</h3>
<p><img src="building-comfort-arch.png" alt="Architecture"></p>
<p>This app consists of:</p>
<ul>
<li>A Source getting changes to building environment data from Cosmos DB.</li>
<li>Several Continuous Queries that calculate comfort levels and alerts for the rooms, as well as aggregate values for the floors and building as a whole.</li>
<li>A Gremlin Reaction that updates the Cosmos DB database with the calculated comfort levels and aggregate values based on changes in the room environment measurements.</li>
<li>A SignalR Reaction that receives changes and forwards them to any connected front end clients.</li>
<li>An Azure Function App that provides HTTP endpoints for the demo app to directly change the environment values in the database.</li>
<li>A React frontend that invokes updates via the Function App and listens for changes via the SignalR reaction.</li>
</ul>
<h2 id="deploying-the-app">Deploying the App</h2>
<h3 id="1-set-up-the-sample-data-provider">1. Set up the sample data provider</h3>
<p>From the <code>apps/building-comfort/devops/azure-resources</code> folder, use the Azure CLI to deploy <code>cosmosdb.bicep</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>az login  <span style="color:#75715e"># If you are not already logged in</span>
</span></span><span style="display:flex;"><span>az deployment group create -f cosmosdb.bicep --resource-group &lt;your resource group&gt; -p <span style="color:#111">cosmosAccountName</span><span style="color:#f92672">=</span>&lt;your account name&gt;
</span></span></code></pre></div><p>Fill in the name of the resource group you want deploy the demo (you will need to <a href="https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/manage-resource-groups-portal#create-resource-groups">create a new resource group</a> first if you don&rsquo;t already have one), and a name of your choice for the Cosmos DB account. For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>az deployment group create -f cosmosdb.bicep --resource-group my-resource-group -p <span style="color:#111">cosmosAccountName</span><span style="color:#f92672">=</span>my-drasi-db
</span></span></code></pre></div><p>The bicep deployment will create a new CosmosDb account with the Gremlin API enabled and a database named <code>Contoso</code> with an empty <code>Facilities</code> graph.</p>
<h4 id="populate-the-sample-data">Populate the sample data</h4>
<p>Copy the following into a <code>config.py</code> file under <code>apps/building-comfort/devops/data</code> and edit the <code>cosmosUri</code> and <code>cosmosPassword</code> values to match your created Cosmos DB account.</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#111">cosmosUri</span> <span style="color:#f92672">=</span> <span style="color:#d88200">&#34;wss://my-drasi-db.gremlin.cosmos.azure.com:443/&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#111">cosmosUserName</span> <span style="color:#f92672">=</span> <span style="color:#d88200">&#34;/dbs/Contoso/colls/Facilities&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#111">cosmosPassword</span> <span style="color:#f92672">=</span> <span style="color:#d88200">&#34;xxx...xxx&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#111">buildingCount</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#111">floorCount</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span><span style="color:#111">roomCount</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span><span style="color:#111">defaultRoomTemp</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">70</span>
</span></span><span style="display:flex;"><span><span style="color:#111">defaultRoomHumidity</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">40</span>
</span></span><span style="display:flex;"><span><span style="color:#111">defaultRoomCo2</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
</span></span></code></pre></div><p>You can find the values for the <code>cosmosUri</code> and <code>cosmosPassword</code> in the Azure portal under your Cosmos DB account or by using the Azure CLI:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># For the cosmosUri, you can use the gremlinEndpoint returned by:</span>
</span></span><span style="display:flex;"><span><span style="color:#111">COSMOS_DB_ID</span><span style="color:#f92672">=</span><span style="color:#00a8c8">$(</span>az cosmosdb show -n my-drasi-db -g my-resource-group --query id -o tsv<span style="color:#00a8c8">)</span>
</span></span><span style="display:flex;"><span>az resource show --id <span style="color:#d88200">&#34;</span><span style="color:#111">$COSMOS_DB_ID</span><span style="color:#d88200">&#34;</span> --query properties.gremlinEndpoint -o tsv
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># For the cosmosPassword, you can use the primaryMasterKey returned by:</span>
</span></span><span style="display:flex;"><span>az cosmosdb keys list --name my-drasi-db --resource-group my-resource-group --type keys --query primaryMasterKey -o tsv
</span></span></code></pre></div><p>Once you have the <code>config.py</code> file, you can run the <code>load_graph.py</code> script in the same directory to populate the graph with sample data:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pip install gremlinpython  <span style="color:#75715e"># If you don&#39;t already have the gremlinpython package installed</span>
</span></span><span style="display:flex;"><span>python load_graph.py
</span></span></code></pre></div><h3 id="2-deploy-the-drasi-components">2. Deploy the Drasi components</h3>
<h4 id="deploy-the-sources">Deploy the sources</h4>
<p>Currently, we are unable to create a Kubernetes Secret using the Drasi CLI, so it needs to be manaually created using <code>kubectl</code>. Navigate to your CosmosDB account in the Azure Portal. You will need to retrieve the value of <code>PRIMARY CONNECTION STRING</code> from the <code>Keys</code> blade. Run the following command to create the secrets:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl create secret generic comfy-creds --from-literal<span style="color:#f92672">=</span><span style="color:#111">accountEndpoint</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;${PRIMARY CONNECTION STRING}&#39;</span>
</span></span></code></pre></div><p>You can also look up the <code>SourceAccountEndpoint</code> value in the Azure portal or by using the Azure CLI:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>az cosmosdb keys list --name my-drasi-db -g my-resource-group --type connection-strings --query <span style="color:#d88200">&#34;connectionStrings[?contains(description, &#39;Primary Gremlin Connection String&#39;)].[connectionString]&#34;</span> -o tsv
</span></span></code></pre></div><p>From the <code>apps/building-comfort/devops/reactive-graph</code> folder, apply the <code>source-facilities.yaml</code> file with the drasi CLI to your cluster:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>drasi apply -f source-facilities.yaml
</span></span></code></pre></div><h4 id="deploy-the-queries">Deploy the queries</h4>
<p>From the <code>apps/building-comfort/devops/reactive-graph</code> folder, use the drasi CLI to deploy the continuous queries:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>drasi apply -f query-alert.yaml
</span></span><span style="display:flex;"><span>drasi apply -f query-comfort-calc.yaml
</span></span><span style="display:flex;"><span>drasi apply -f query-ui.yaml
</span></span></code></pre></div><p>Breaking down the Continuous Queries specified in each file:</p>
<ul>
<li>
<p><code>query-alert.yaml</code> specifies the queries that detect when the comfort level in a room, a floor, or the whole building is outside the acceptable range of 40-50.</p>
</li>
<li>
<p><code>query-comfort-calc.yaml</code> specifies the queries that calculate the comfort level for each room based on the temperature, humidity, and CO2 levels as described in the overview. It also specifies queries to aggregate the comfort level for each floor based on its rooms, and for the building based on its floors.</p>
</li>
<li>
<p><code>query-ui.yaml</code> query gets the relevant properties and the relationships between rooms, floors and the building for visualization in the frontend React app.</p>
</li>
</ul>
<h4 id="deploy-the-reactions">Deploy the reactions</h4>
<p>To deploy the gremlin reaction, we need to create another secret using <code>kubectl</code> to specify your Gremlin graph in the Cosmos DB instance:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl create secret generic comfy-creds --from-literal<span style="color:#f92672">=</span><span style="color:#111">DatabaseHost</span><span style="color:#f92672">=</span><span style="color:#d88200">${</span><span style="color:#111">DatabaseHost</span><span style="color:#d88200">}</span> --from-literal<span style="color:#f92672">=</span><span style="color:#111">DatabasePrimaryKey</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;${DatabasePrimaryKey}&#39;</span>
</span></span></code></pre></div><ul>
<li><code>DatabaseHost</code> with the host DNS name for the Gremlin endpoint. This is the same as the <code>cosmosUri</code> in <code>config.py</code> without the <code>wss://</code> prefix or the port number.</li>
<li><code>DatabasePrimaryKey</code> with the primary key, same as the <code>cosmosPassword</code> in <code>config.py</code>.</li>
</ul>
<p>Apply the <code>reaction-gremlin.yaml</code> file and the <code>reaction-signalr.yaml</code> file with the drasi CLI to your cluster:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>drasi apply -f reaction-gremlin.yaml
</span></span><span style="display:flex;"><span>drasi apply -f reaction-signalr.yaml
</span></span></code></pre></div><p>The Gremlin Reaction is used to update the graph in Cosmos DB with the latest comfort level for each room, floor, and building. The SignalR Reaction is used to send the updates of the UI query to the frontend React app.</p>
<p>To connect the React app to the SignalR Reaction, forward the gateway port for the SignalR reaction to a port on your local machine:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>kubectl port-forward services/signalr-building-gateway 5001:8080 -n default
</span></span></code></pre></div><h3 id="3-run-the-demo-backend-and-frontend">3. Run the demo backend and frontend</h3>
<h4 id="configure-and-start-the-backend-functions-app-for-updating-the-data">Configure and start the backend Functions App for updating the data</h4>
<p>From the <code>apps/building-comfort/functions</code> folder, create a file named <code>local.settings.json</code> and paste the following content with the appropriate <code>FACILITIES_URL</code> (same as the <code>cosmosUri</code> value) and <code>FACILITIES_KEY</code> (same as the <code>cosmosPassword</code>) value.</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;IsEncrypted&#34;</span><span style="color:#111">:</span> <span style="color:#00a8c8">false</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;Values&#34;</span><span style="color:#111">:</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;FUNCTIONS_WORKER_RUNTIME&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;node&#34;</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;FACILITIES_DB_NAME&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;Contoso&#34;</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;FACILITIES_CNT_NAME&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;Facilities&#34;</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;FACILITIES_URL&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;wss://my-drasi-db.gremlin.cosmos.azure.com:443/&#34;</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;FACILITIES_KEY&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;xxx...xxx&#34;</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#111">},</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;Host&#34;</span><span style="color:#111">:</span> <span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;LocalHttpPort&#34;</span><span style="color:#111">:</span> <span style="color:#ae81ff">7071</span>
</span></span><span style="display:flex;"><span>  <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div><p>Install the dependencies and run the Functions app locally:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm install
</span></span><span style="display:flex;"><span>npm start -- --javascript
</span></span></code></pre></div><h4 id="configure-and-start-the-frontend-react-app">Configure and start the frontend React app</h4>
<p>From the <code>apps/building-comfort/app</code> folder, edit the <code>config.json</code> file to specify the local URLs for your deployment:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;crudApiUrl&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;http://localhost:7071&#34;</span><span style="color:#111">,</span>     <span style="color:#75715e">// LocalHttpPort of the backend Functions app
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#f92672">&#34;signalRUrl&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;http://localhost:5001/hub&#34;</span><span style="color:#111">,</span> <span style="color:#75715e">// Kubectl port-forward of SignalR reaction
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#960050;background-color:#1e0010">...</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div><p>Install the dependencies and run the React app locally:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm install
</span></span><span style="display:flex;"><span>npm start
</span></span></code></pre></div><p>The front-end should launch at <a href="http://localhost:3000">http://localhost:3000</a> by default.</p>
<p><strong>NOTE</strong>: If you are experiencing issues with CORS policy (e.g. clicking a button and not seeing any changes), you can follow this workaround solution:</p>
<ol>
<li>Install Chrome</li>
<li>In a terminal, execute the following line:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>open /Applications/Google<span style="color:#8045ff">\ </span>Chrome.app --args --user-data-dir<span style="color:#f92672">=</span><span style="color:#d88200">&#34;/var/tmp/chrome-dev-disabled-security&#34;</span> --disable-web-security --disable-site-isolation-trials
</span></span></code></pre></div><ol start="3">
<li>Navigate to <code>localhost:3000</code></li>
</ol>
<h4 id="using-the-frontend-app">Using the frontend app</h4>
<p><img src="building-comfort-ui.png" alt="Building Comfort UI"></p>
<p>The UI shows the measured levels of temperature, humidity, and CO2 levels in each room, and the comfort level calculated from those values for each room, floor, and the building. Any alerts for rooms, floors, of the building are show under Comfort Alerts on the left, for example:</p>
<p><img src="building-comfort-ui-alerts.png" alt="Building Comfort UI with alerts"></p>
<p>You can use the buttons associated with each room to change the temperature, humidity, and CO2 levels in each room, and see the comfort level and alerts update in real time:</p>
<ul>
<li>
<p>The <code>BREAK</code> button sets the temperature to 40, humidity to 20, and CO2 to 700, which will result in a room comfort level outside the acceptable range of 40-50. It will set each property individually with a slight delay between them to simulate a real scenario and show the how the comfort level calculations done by the Continuous Queries are affected in real time.</p>
</li>
<li>
<p>The <code>RESET</code> button sets the temperature to 70, humidity to 40, and CO2 to 10, which will restore the room to an acceptable comfort level. As with the <code>BREAK</code> button, it will set each property individually with a slight delay between them.</p>
</li>
</ul>

  <div class="section-index">
    
    
    
    
    
    
    
    
    
</div>
</div>

          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
      </div>
      <div class="col-6 col-sm-4 text-end text-xs-center order-sm-3">
        
      </div>
      <div class="td-footer__copyright-etc col-12 col-sm-4 text-center py-2 order-sm-2">
        
        
        
      </div>
    </div>
  </div>
</footer>
    </div>
    
  <script src="/js/main.min.8aed5c79db3ab0ccc681e77863803193ee0d4003b7ead54fe1d767af3cbf9eec.js" integrity="sha256-iu1ceds6sMzGged4Y4Axk&#43;4NQAO36tVP4ddnrzy/nuw=" crossorigin="anonymous"></script>
<script src='/js/prism.js'></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>