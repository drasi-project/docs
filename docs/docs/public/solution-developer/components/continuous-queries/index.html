<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.111.3">
<link rel="alternate" type="application/rss&#43;xml" href="https://project-drasi.github.io/solution-developer/components/continuous-queries/index.xml">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Continuous Queries | Project Drasi</title>
<meta name="description" content="What are Continuous Queries and How to Use Them 
">
<meta property="og:title" content="Continuous Queries" />
<meta property="og:description" content="What are Continuous Queries and How to Use Them 
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://project-drasi.github.io/solution-developer/components/continuous-queries/" />
<meta itemprop="name" content="Continuous Queries">
<meta itemprop="description" content="What are Continuous Queries and How to Use Them 
"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Continuous Queries"/>
<meta name="twitter:description" content="What are Continuous Queries and How to Use Them 
"/>




<link rel="preload" href="/scss/main.min.8b5cb6bf325858503123a884cabb18b474576e49a8f8b45c16440e12cb52ad15.css" as="style">
<link href="/scss/main.min.8b5cb6bf325858503123a884cabb18b474576e49a8f8b45c16440e12cb52ad15.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.6.3.min.js"
  integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ=="
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/prism.css"/>

  </head>
  <body class="td-section">
    <header>
      <nav class="td-navbar navbar-dark js-navbar-scroll">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="navbar-brand__name">Project Drasi</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/support"><span>SUPPORT</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://dev.azure.com/azure-octo/Incubations/_git/ReactiveGraph?path=%2F&amp;version=GBdevelop&amp;_a=contents" target="_blank" rel="noopener"><span>CODE</span></a>
      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse" id="td-section-nav">
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m--li">
  <a href="/" title="Project Drasi" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-"><span class="">Home</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-solution-developer-li">
  <a href="/solution-developer/" title="Solution Developer Guides" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developer"><span class="">Solution Developer</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-solution-developergetting-started-li">
  <a href="/solution-developer/getting-started/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developergetting-started"><span class="">QuickStart Tutorial</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-solution-developerbackground-li">
  <a href="/solution-developer/background/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developerbackground"><span class="">Background</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-solution-developercomponents-li">
  <a href="/solution-developer/components/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developercomponents"><span class="">Components</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-solution-developercomponentssources-li">
  <a href="/solution-developer/components/sources/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developercomponentssources"><span class="">Sources</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-solution-developercomponentscontinuous-queries-li">
  <a href="/solution-developer/components/continuous-queries/" class="align-left ps-0 active td-sidebar-link td-sidebar-link__section" id="m-solution-developercomponentscontinuous-queries"><span class="td-sidebar-nav-active-item">Continuous Queries</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-solution-developercomponentsreactions-li">
  <a href="/solution-developer/components/reactions/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developercomponentsreactions"><span class="">Reactions</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-solution-developersolution-design-li">
  <a href="/solution-developer/solution-design/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developersolution-design"><span class="">Solution Design</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-solution-developerquery-language-li">
  <a href="/solution-developer/query-language/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developerquery-language"><span class="">Continuous Query Syntax</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-solution-developervscode-extension-li">
  <a href="/solution-developer/vscode-extension/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developervscode-extension"><span class="">VS Code Extension</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-solution-developertroubleshooting-li">
  <a href="/solution-developer/troubleshooting/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developertroubleshooting"><span class="">Troubleshooting</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-solution-developersample-apps-li">
  <a href="/solution-developer/sample-apps/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-solution-developersample-apps"><span class="">Sample Applications</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-administrator-li">
  <a href="/administrator/" title="Administrator Guides" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-administrator"><span class="">Administrator</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-administratorplatform-deployment-li">
  <a href="/administrator/platform-deployment/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-administratorplatform-deployment"><span class="">Deploying Drasi</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-administratorplatform-deploymentfrom-preview-images-li">
  <a href="/administrator/platform-deployment/from-preview-images/" title="Deploying Drasi from Preview Images" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-administratorplatform-deploymentfrom-preview-images"><span class="">From Images</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-administratorplatform-deploymentfrom-source-li">
  <a href="/administrator/platform-deployment/from-source/" title="Deploying Drasi from Source" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-administratorplatform-deploymentfrom-source"><span class="">From Source</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-administratorsample-app-deployment-li">
  <a href="/administrator/sample-app-deployment/" title="Installing Sample Applications" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-administratorsample-app-deployment"><span class="">Installing Samples</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-administratorsample-app-deploymentcurbside-pickup-li">
  <a href="/administrator/sample-app-deployment/curbside-pickup/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-administratorsample-app-deploymentcurbside-pickup"><span class="">Curbside Pickup</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-administratorsample-app-deploymentbuilding-comfort-li">
  <a href="/administrator/sample-app-deployment/building-comfort/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-administratorsample-app-deploymentbuilding-comfort"><span class="">Building Comfort</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-administratorobservability-li">
  <a href="/administrator/observability/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-administratorobservability"><span class="">Observability</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-support-li">
  <a href="/support/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-support"><span class="">Support</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-reference-li">
  <a href="/reference/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-reference"><span class="">Reference</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referenceglossary-li">
  <a href="/reference/glossary/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-referenceglossary"><span class="">Glossary</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referencedemo-environment-li">
  <a href="/reference/demo-environment/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-referencedemo-environment"><span class="">Demo Environment</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referencequery-container-li">
  <a href="/reference/query-container/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-referencequery-container"><span class="">Query Container</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referenceusing-kind-li">
  <a href="/reference/using-kind/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-referenceusing-kind"><span class="">Using Kind</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referenceusing-minikube-li">
  <a href="/reference/using-minikube/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-referenceusing-minikube"><span class="">Using MiniKube</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referencedrasi-cli-li">
  <a href="/reference/drasi-cli/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-referencedrasi-cli"><span class="">Drasi CLI</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referencesmoke-test-li">
  <a href="/reference/smoke-test/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-referencesmoke-test"><span class="">Smoke test</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-referencesetup-postgres-li">
  <a href="/reference/setup-postgres/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-referencesetup-postgres"><span class="">Using PostgreSQL</span></a>
</li>
  </ul>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            
<div class="td-page-meta ms-2 pb-1 pt-2 mb-0">

</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#example-incident-alerts">Example: Incident Alerts</a></li>
    <li><a href="#creation">Creation</a></li>
    <li><a href="#deletion">Deletion</a></li>
    <li><a href="#configuration">Configuration</a>
      <ul>
        <li><a href="#sources">Sources</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </div>
    
            

          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="https://project-drasi.github.io/solution-developer/">Solution Developer</a></li>
  <li class="breadcrumb-item">
    <a href="https://project-drasi.github.io/solution-developer/components/">Components</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    Continuous Queries</li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>Continuous Queries</h1>
  <div class="lead">What are Continuous Queries and How to Use Them</div>
	<header class="article-meta">
		
</header>
	<p>Continuous Queries are the most important component of Drasi. They are the mechanism by which you tell Drasi what changes to detect in source systems as well as the data you want distributed when changes are detected. <a href="/solution-developer/components/sources">Sources</a> provide source changes to subscribed Continuous Queries, which then provide query result changes to subscribed <a href="/solution-developer/components/reactions">Reactions</a>.</p>

<figure>
    <img src="simple-end-to-end.png"
         alt="End to End" width="65%"/> 
</figure>

<p>Continuous Queries, as the name implies, are queries that run continuously. To understand what is unique about them, it is useful to contrast them with a the kind of <strong>instantaneous queries</strong> developers are accustomed to running against databases.</p>
<p>When you execute an <strong>instantaneous query</strong>, you are running the query against the database at a point in time. The database calculates the results to the query and returns them. While you work with those results, you are working with a static snapshot of the data and are unaware of any changes that may have happened to the data after you ran the query. If you run the same instantaneous query periodically, the query results might be different each time due to changes made to the data by other processes. But to understand what has changed, you would need to compare the most recent result with the previous result.</p>

<figure>
    <img src="instantaneous-query.png"
         alt="Instantaneous Query" width="60%"/> 
</figure>

<p><strong>Continuous Queries</strong>, once started, continue to run until they are stopped. While running, Continuous Queries maintain a perpetually accurate query result, incorporating any changes made to the source database as they occur. Not only do Continuous Queries allow you to request the query result as it was at any point in time, but as changes occur, the Continuous Query determines exactly which result elements have been added, updated, and deleted, and distributes a precise description of the changes to all Reactions that have subscribed to the Continuous Query.</p>

<figure>
    <img src="/continuous-query.png"
         alt="Continuous Query" width="60%"/> 
</figure>

<p>Continuous Queries are implemented as graph queries written in the <a href="/solution-developer/query-language">Cypher Query Language</a>. The use of a declarative graph query language means you can:</p>
<ul>
<li>describe in a single query expression which changes you are interested in detecting and what data you want notifications of those changes to contain.</li>
<li>express rich query logic that takes into consideration both the properties of the data you are querying and the relationships between data.</li>
<li>create queries that span data across multiple Sources without complex join syntax, even when there is no natural connection between data in the Source systems, including queries that incorporate both relational and graph sources.</li>
</ul>
<h2 id="example-incident-alerts">Example: Incident Alerts</h2>
<p>Imagine an Incident Alerting Service which notifies managers if any of the employees in their team are at risk due to dangerous incidents happening in their location (e.g. fires, storms, protests, etc). For this example, assume the source data is a property graph of nodes (rectangles) and relations (lines) shown in the following diagram:</p>
<p><img src="incident-alerting-graph.png" alt="Incident Alerting"></p>
<p>Using Drasi, the following Cypher query could be used to to identify each employee at risk:</p>
<pre tabindex="0"><code>MATCH
  (e:Employee)-[:ASSIGNED_TO]-&gt;(t:Team),
  (m:Employee)-[:MANAGES]-&gt;(t:Team),
  (e:Employee)-[:LOCATED_IN]-&gt;(:Building)-[:LOCATED_IN]-&gt;(r:Region),
  (i:Incident {type:&#39;environmental&#39;})-[:OCCURS_IN]-&gt;(r:Region) 
WHERE
  elementId(e) &lt;&gt; elementId(m) AND i.severity IN [‘critical’, ‘extreme’] AND i.endTimeMs IS NULL
RETURN 
  m.name AS ManagerName, m.email AS ManagerEmail, 
  e.name AS EmployeeName, e.email AS EmployeeEmail,
  r.name AS RegionName, 
  elementId(i) AS IncidentId, i.severity AS IncidentSeverity, i.description AS IncidentDescription
</code></pre><p>The <code>MATCH</code> and <code>WHERE</code> clauses of the query describe a pattern that identifies all <strong>Employees</strong> located in <strong>Buildings</strong> within <strong>Regions</strong> where there are active <strong>Incidents</strong> of <strong>type</strong> &rsquo;environmental&rsquo; that have a <strong>severity</strong> level of ‘critical’ or ‘extreme’. This means that any combination of correctly connected nodes with the required property values should be included in the query result.</p>
<p>The <code>RETURN</code> clause of the query generates output containing the name and email address of the at risk employee and their manager, as well as details about the incident and the region in which it is located. This defines the schema for results generated by the Continuous Query.</p>
<p>When the above Continuous Query is first run, there are no results that satisfy the query, because there are no Incidents in the data. But as soon as an extreme severity Forest Fire <strong>Incident</strong> in Southern California is added to the database, as follows:</p>
<p><img src="incident-alerting-graph-with-incident.png" alt="Incident Added"></p>
<p>The query would generate the following output showing that two records (for employees <strong>Bob</strong> and <strong>Claire</strong>) now meet the query criteria and have been <strong>added</strong> to the query result:</p>
<pre tabindex="0"><code>{
 “added”: [
  { “ManagerName”: “Allen”, “ManagerEmail”: “allen@contoso.com”, “EmployeeName”: “Bob”, “EmployeeEmail”: “bob@contoso.com”, “RegionName”: “Southern California”, “IncidentId”: “in1000”, “IncidentSeverity”: “extreme”, “IncidentDescription”: “Forest Fire” },
  { “ManagerName”: “Allen”, “ManagerEmail”: “allen@contoso.com”, “EmployeeName”: “Claire”, “EmployeeEmail”: “claire@contoso.com”, “RegionName”: “Southern California”, “IncidentId”: “in1000”, “IncidentSeverity”: “extreme”, “IncidentDescription”: “Forest Fire” }
 ],
 “updated”: [],
 “deleted”: []
}
</code></pre><p>If <strong>Bob</strong> subsequently changed location, removing him from the Southern Californian Region while the Forest Fire was still active, the Continuous Query would generate the following output, showing that Bob’s record had been <strong>deleted</strong> from the query result:</p>
<pre tabindex="0"><code>{
 “added”: [],
 “updated”: [],
 “deleted”: [
  { “ManagerName”: “Allen”, “ManagerEmail”: “allen@contoso.com”, “EmployeeName”: “Bob”, “EmployeeEmail”: “bob@contoso.com”, “RegionName”: “Southern California”, “IncidentId”: “in1000”, “IncidentSeverity”: “extreme”, “IncidentDescription”: “Forest Fire” }
 ]
}
</code></pre><p>If the <strong>severity</strong> of the Forest Fire then changed from &rsquo;extreme&rsquo; to &lsquo;critical&rsquo;, the Continuous Query would spontaneously generate the following output showing a that the result for Claire had been <strong>updated</strong>. The update includes what the result was both <strong>before</strong> and <strong>after</strong> the change:</p>
<pre tabindex="0"><code>{
 “added”: [],
 “updated”: [
  { 
   “before”: { “ManagerName”: “Allen”, “ManagerEmail”: “allen@contoso.com”, “EmployeeName”: “Bob”, “EmployeeEmail”: “bob@contoso.com”, “RegionName”: “Southern California”, “IncidentId”: “in1000”, “IncidentSeverity”: “extreme”, “IncidentDescription”: “Forest Fire” },
   “after”: { “ManagerName”: “Allen”, “ManagerEmail”: “allen@contoso.com”, “EmployeeName”: “Bob”, “EmployeeEmail”: “bob@contoso.com”, “RegionName”: “Southern California”, “IncidentId”: “in1000”, “IncidentSeverity”: “critical”, “IncidentDescription”: “Forest Fire” }
 ],
 “deleted”: []
}
</code></pre><p>In some instances, a single source change can result in multiple changes to the query result e.g. multiple records can be added, updated, and deleted. In such cases, the Continuous Query generates a single result change notification containing all the changes. This enables subscribed Reactions to treat the related changes atomically given they all arose from a single source change.</p>
<h2 id="creation">Creation</h2>
<p>Continuous Queries can be created and managed using the <code>drasi</code> CLI tool.</p>
<p>The easiest way to create a Continuous Query, and the way you will often create one as part of a broader software solution, is to:</p>
<ol>
<li>Create a YAML file containing the Continuous Query definition. This can be stored in your solution repo and versioned along with all the other solution code / resources.</li>
<li>Run <code>drasi apply</code> to apply the YAML file, creating the Continuous Query</li>
</ol>
<p>When a new Continuous Query is created it:</p>
<ol>
<li>Subscribes to its Sources, describing the types of change it wants to receive.</li>
<li>Queries its Sources to load the initial data for its query result.</li>
<li>Begins processing the stream of SourceChangeEvents from its Sources that represent the sequence of low-level database changes that have occurred (inserts, updated, deletes) and translates them into changes to its query result.</li>
</ol>
<p>Here is a simple example of the definition for the Incident Alerting Continuous Query used in the example above:</p>
<pre tabindex="0"><code>apiVersion: v1
kind: ContinuousQuery
name: manager-incident-alert
spec:
  sources:    
    subscriptions:
      - id: human-resources
  query: &gt; 
    MATCH
      (e:Employee)-[:ASSIGNED_TO]-&gt;(t:Team),
      (m:Employee)-[:MANAGES]-&gt;(t:Team),
      (e:Employee)-[:LOCATED_IN]-&gt;(:Building)-[:LOCATED_IN]-&gt;(r:Region),
      (i:Incident {type:&#39;environmental&#39;})-[:OCCURS_IN]-&gt;(r:Region) 
    WHERE
      elementId(e) &lt;&gt; elementId(m) AND i.severity IN [‘critical’, ‘extreme’] AND i.endTimeMs IS NULL
    RETURN 
      m.name AS ManagerName, m.email AS ManagerEmail, 
      e.name AS EmployeeName, e.email AS EmployeeEmail,
      r.name AS RegionName, 
      elementId(i) AS IncidentId, i.severity AS IncidentSeverity, i.description AS IncidentDescription
</code></pre><p>In this example, the <code>spec.sources.subscriptions</code> property identifies the Source with the id <code>human-resources</code> as the source of data for the Continuous Query. The <code>spec.query</code> property contains the text of the Cypher query. Full details of the Continuous Query configuration options are described in the <a href="#configuration">Configuration</a> section.</p>
<p>If this Continuous Query resource definition was contained in a file called <code>query.yaml</code>, to create this query on a Drasi environment that was the current Kubectl context, you would run the command:</p>
<pre tabindex="0"><code>drasi apply -f query.yaml
</code></pre><p>You can then use additional <code>drasi</code> commands to query the existence and status of the Continuous Query resource. For example, to see a list of the active Continuous Queries, run the following command:</p>
<pre tabindex="0"><code>drasi list continuousqueries
</code></pre><h2 id="deletion">Deletion</h2>
<p>To delete an active Continuous Query, run the following command:</p>
<pre tabindex="0"><code>drasi delete continuousqueries &lt;query-id&gt;
</code></pre><p>For example, if the Continuous Query id from the <code>name</code> property of the resource definition is <code>manager-incident-alert</code>, you would run,</p>
<pre tabindex="0"><code>drasi delete continuousqueries manager-incident-alert
</code></pre><p><strong>Note</strong>: Drasi does not currently enforce dependency integrity between Continuous Queries and Reactions. If you delete a Continuous Query that is used by one or more Reactions, they will stop getting query result changes.</p>
<h2 id="configuration">Configuration</h2>
<p>The definition for a Continuous Query has the following basic structure:</p>
<pre tabindex="0"><code>apiVersion: v1
kind: ContinuousQuery
name: &lt;continuous_query_id&gt;
spec:
  mode: &lt;QUERY | filter&gt;
  indexType: &lt;PERSISTED | memory&gt;
  sources:    
    subscriptions:
      - id: &lt;source_1_id&gt;
        nodes:
          - sourceLabel: &lt;source_1_node_1_source_label&gt;, 
            queryLabel: &lt;source_1_node_1_query_label&gt;,
            suppressIndex: &lt;true | FALSE&gt;
          - ...
        relations:
          - sourceLabel: &lt;source_1_rel_1_source_label&gt;, 
            queryLabel: &lt;source_1_rel_1_query_label&gt;,
            suppressIndex: &lt;true | FALSE&gt;
          - ...
      - id: &lt;source_2_id&gt;
        nodes: ...
        relations: ...
    joins:
      - id: &lt;join_1_id&gt;
        keys:
          - label: &lt;key_1_label_name&gt;
            property: &lt;key_1_property_name&gt;
          - label: &lt;key_2_label_name&gt;
            property: &lt;key_2_property_name&gt;
      - id: &lt;join_2_id&gt;
        keys: ...
  view:
    enabled: &lt;true | false&gt;
    retentionPolicy:
      &lt;latest: | all: | expire: afterSeconds: &lt;TTL&gt;&gt;
  params:
    &lt;param_1_key&gt;: &lt;param_1_value&gt;
    &lt;param_2_key&gt;: &lt;param_2_value&gt;
    ...
  query: MATCH ... WHERE ... RETURN ...
</code></pre><p>In the Continuous Query resource definition:</p>
<ul>
<li><strong>apiVersion</strong> must be <strong>v1</strong></li>
<li><strong>kind</strong> must be <strong>ContinuousQuery</strong></li>
<li><strong>name</strong> is the <strong>id</strong> of the Continuous Query and must be unique. Is used to identify the Continuous Query through the CLI/API and in Reactions to identify the Continuous Queries they should subscribe to..</li>
</ul>
<p>The following table provides a summary of the other configuration settings from the <strong>spec</strong> section of the resource definition:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>mode</td>
<td>Can have the value <strong>query</strong> (default) or <strong>filter</strong>. If a Continuous Query is running in <strong>filter</strong> mode, it does not maintain a query result and as such does not generate detailed change notifications in response to Source changes. Instead, any Source change that adds or updates a query result will be output as an <strong>added</strong> result item. Any change that causes results to be removed from the query result will not generate output.</td>
</tr>
<tr>
<td>indexType</td>
<td>Can have the value <strong>persisted</strong> (default) or <strong>memory</strong>. This settings controls whether Drasi caches the Continuous Query element and solution indexes to a persistent store, or keeps them in memory. Using memory-based indexes is good for testing and is also OK for Continuous Queries that do not require significant bootstrapping when they start.</td>
</tr>
<tr>
<td>sources</td>
<td>Contains two sections: <strong>subscriptions</strong> and <strong>joins</strong>. The <strong>subscriptions</strong> section describes the Sources the Continuous Query will subscribe to for data and optionally maps the Source Labels to the Label names used in the Cypher Query. The <strong>joins</strong> section describes the way the Continuous Query connects elements from multiple sources to enable you to write graph queries that span sources. Both sections are described in more detail in the <a href="#sources">Sources</a> section.</td>
</tr>
<tr>
<td>params</td>
<td>Parameter values that are used by the Cypher query, enabling the repeated use of the same query that can be customized using parameter values.</td>
</tr>
<tr>
<td>view</td>
<td>(Optional). Defines the behaviour of the results view.  <strong>enabled</strong> controls if the results of the query are cached in the results view. <strong>retentionPolicy</strong> determines how long the results will be stored for.  <strong>latest</strong> (default) only holds the most recent version, <strong>all</strong> holds all previous versions and allows querying at a time point in the past, <strong>expire</strong> holds the non current results for a limited time.</td>
</tr>
<tr>
<td>query</td>
<td>The Cypher query that defines the change the Continuous Query is detecting and the output it generates. Explained in <a href="/solution-developer/query-language">Continuous Query Syntax</a>.</td>
</tr>
</tbody>
</table>
<h3 id="sources">Sources</h3>
<p>The configuration settings in the <strong>spec.sources.subscriptions</strong> section of the Continuous Query resource definition do the following:</p>
<ul>
<li>Define the Sources the Continuous Query will subscribe to for its change data.</li>
<li>Within each Source, define the Labels of the Nodes and Relations that the the Continuous Query expects from that Source. If you do not map a Node/Relation Label used in the query to a specific Source, it is assumed to come from the first Source configured.</li>
<li>For each Node and Relation, create a mapping between the Label name used in the Source data and the Label name used in the Query. This allows you to write queries independent of the Label/Type names used in the source data, easily use the same Query against multiple sources, and deal with the name collisions across Sources.</li>
<li>For each Node and Relation, you also have the ability to disable element level caching. This can be useful when processing append only logs where the main element being processed (i.e. the log record) will never change once created, and will not be referenced in query future query results.</li>
</ul>
<p>The configuration settings in the <strong>spec.sources.joins</strong> section of the Continuous Query resource definition create a mapping between a Label and Property name pair from one source, with a Label and Property Name pair in another source.
This allows the Continuous Query to be written as a single unified query without consideration from which Source data is originating from. Drasi will use the mapping to create synthetic relations between Nodes as required.</p>
<p>Here is an example of a Continuous Query from the <a href="/solution-developer/sample-apps/curbside-pickup/">Curbside Pickup</a> demo app that defines two Sources: <strong>phys-ops</strong> and <strong>retail-ops</strong>:</p>
<pre tabindex="0"><code>apiVersion: v1
kind: ContinuousQuery
name: curbside-pickup
spec:
  mode: query
  indexType: persisted
  sources:    
    subscriptions:
      - id: phys-ops
        nodes:
          - sourceLabel: Vehicle
          - sourceLabel: Zone
        relations:
          - sourceLabel: LOCATED_IN
      - id: retail-ops
        nodes:
          - sourceLabel: Driver
          - sourceLabel: Order
          - sourceLabel: OrderPickup
        relations:
          - sourceLabel: PICKUP_DRIVER
          - sourceLabel: PICKUP_ORDER
    joins:
      - id: VEHICLE_TO_DRIVER
        keys:
          - label: Vehicle
            property: plate
          - label: Driver
            property: plate
  query: ...
</code></pre>
  <div class="section-index">
    
    
    
    
    
    
    
    
    
</div>
</div>

          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
      </div>
      <div class="col-6 col-sm-4 text-end text-xs-center order-sm-3">
        
      </div>
      <div class="td-footer__copyright-etc col-12 col-sm-4 text-center py-2 order-sm-2">
        
        
        
      </div>
    </div>
  </div>
</footer>
    </div>
    
  <script src="/js/main.min.8aed5c79db3ab0ccc681e77863803193ee0d4003b7ead54fe1d767af3cbf9eec.js" integrity="sha256-iu1ceds6sMzGged4Y4Axk&#43;4NQAO36tVP4ddnrzy/nuw=" crossorigin="anonymous"></script>
<script src='/js/prism.js'></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>